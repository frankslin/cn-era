# cn-era 待办事项

## 已完成的主要功能

### 历史年号数据（已完成！）

**🎉 完整覆盖：498个历史年号，跨越2164年（公元前140年 - 公元2024年）**

所有主要朝代数据已全部完成：

- ✅ **西汉** (-140~8)
- ✅ **新朝** (9~23)
- ✅ **东汉** (25~220)
- ✅ **三国** (220~280) - 魏、蜀、吴
- ✅ **晋朝** (265~420) - 西晋、东晋
- ✅ **南北朝** (420~589) - 南朝（刘宋、南齐、梁、陈）、北朝（北魏、东魏、西魏、北齐、北周）
- ✅ **隋朝** (581~618)
- ✅ **唐朝** (618~907)
- ✅ **武周** (690~705)
- ✅ **五代十国** (907~960)
- ✅ **宋朝** (960~1279)
- ✅ **辽朝** (916~1125)
- ✅ **西夏** (1038~1227)
- ✅ **金朝** (1115~1234)
- ✅ **元朝** (1271~1368)
- ✅ **明朝** (1368~1644)
- ✅ **清朝** (1644~1912)
- ✅ **中华民国** (1912~至今)

### 项目基础设施

- ✅ TypeScript 支持
- ✅ 完整的类型定义
- ✅ Vitest 测试框架（82个测试用例）
- ✅ ESLint 配置
- ✅ GitHub Actions CI/CD
- ✅ 双模块格式（ESM + CommonJS）
- ✅ 英文文档（README.md）
- ✅ 中文文档（README.zh-CN.md）
- ✅ 贡献指南（CONTRIBUTING.md）
- ✅ MIT 开源协议
- ✅ 数据验证脚本（validate-data.ts）
- ✅ tsup 构建配置（minification + license banner）

### v0.3.0 新增功能（已完成！）

- ✅ **朝代枚举系统**：使用 CBDB 标准化朝代编码
- ✅ **智能主线模式**：自动返回正统朝代（`mode: 'mainline'`）
- ✅ **全部模式**：查看所有并存政权（`mode: 'all'`）
- ✅ **朝代筛选**：按 Dynasty 枚举筛选特定朝代
- ✅ **优先级系统**：MainlinePriority 配置正统朝代优先级
- ✅ **完整文档更新**：README.md 和 README.zh-CN.md
- ✅ **所有测试通过**：82/82 测试用例通过

## 当前待办事项

### 发布准备
- [ ] 添加 CHANGELOG.md（v0.3.0 更新日志）
- [ ] 准备 npm 发布（v0.3.0）
- [ ] 创建 v0.3.0 发布说明
- [ ] 准备发布公告

### 文档完善
- [ ] 添加更详细的 API 文档
- [ ] 添加历史数据准确性说明文档
- [ ] 添加使用示例和最佳实践
- [ ] 添加迁移指南（v0.2.0 → v0.3.0）

### 功能增强（未来版本）
- [ ] 支持农历转换
- [ ] 支持干支纪年
- [ ] 添加 CLI 工具
- [ ] 添加在线演示网站
- [ ] 支持更多输出格式（JSON, CSV等）
- [ ] 添加年号搜索功能（根据年号查年份）
- [ ] 支持模糊查询
- [ ] 添加性能基准测试

### 数据质量
- ✅ 审查并验证所有年号数据的准确性（498个年号已验证）
- ✅ 数据验证脚本（年份重叠、连续性、范围检查）
- [ ] 添加数据来源引用
- [ ] 处理有争议的年号（如果有）

## 年份范围说明

当前支持范围：**-841 到 3000**

- `year < -841`：抛出错误
- `-841 ≤ year ≤ -141`：返回空数组（此时期无年号制度）
- `-140 ≤ year ≤ 1911`：返回历史年号（已完成）
- `year ≥ 1912`：返回民国纪年
- `year > 3000`：抛出错误

## 版本路线图

- ✅ **v0.1.0** - 初始版本（唐、宋、元、明、清）
- ✅ **v0.1.1** - Bug修复（宣统年号延伸至1912）
- ✅ **v0.2.0** - 完整历史覆盖（-140至1912，498个年号）
- 🚀 **v0.3.0** - 朝代枚举系统 + 智能主线模式（当前版本，准备发布）
- 📋 **v0.4.0** - CLI 工具和在线演示
- 📋 **v1.0.0** - 正式发布（稳定版）

## 数据来源

主要参考：
1. [维基百科 - 中国年号列表](https://zh.wikipedia.org/wiki/中国年号列表)
2. [CBDB (China Biographical Database)](https://projects.iq.harvard.edu/cbdb)
3. 《中国历代年号考》
4. 各朝代正史记载

## 贡献

欢迎贡献！请查看 [CONTRIBUTING.md](CONTRIBUTING.md) 了解如何参与项目。

主要贡献领域：
- 历史数据验证和审查
- 文档改进
- 测试用例补充
- 功能建议

## 注意事项

1. 所有年号使用**繁体中文**
2. 注意改元情况（一年内多个年号）
3. 注意政权并存时期（如南北朝、五代十国、宋辽金西夏）
4. 确保年号起止时间准确无误
5. 添加数据时同步更新测试用例

## 数据格式

```typescript
{ dynasty: '朝代名', reign_title: '年號', start_year: 起始年, end_year: 結束年 }
```

例如：
```typescript
{ dynasty: '唐', reign_title: '貞觀', start_year: 627, end_year: 649 }
```
